-
  name: Build
  type: parallel
  steps:
    -
      service: jekyll
      name: Jekyll Test
      command: ./_script/ci/jekyll.test.sh
    -
      service: jekyll
      name: Jekyll Production
      command: ./_script/ci/jekyll.production.sh
-
  name: Test
  type: parallel
  steps:
    -
      service: shipyard
      name: HTML Proofer
      command: ./_script/ci/htmlproofer.sh
    -
      service: shipyard
      name: Surge Preview
      command: sh ./ci/deploy_preview.sh
-
  name: Review
  type: manual
  exclude: master
  steps:
    -
      service: shipyard
      name: Percy
      command: percy snapshot --enable_javascript --widths "375,768,1280" _site/
-
  name: Deploy
  type: parallel
  tag: master
  steps:
    -
      service: shipyard
      name: Update Percy
      command: percy snapshot --enable_javascript --widths "375,768,1280" _site/
    -
      service: shipyard
      name: GitHub Pages
      command: ./_script/ci/github.sh
